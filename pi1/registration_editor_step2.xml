<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<formidable version="0.5.0">
	<meta>
		<name>Seminar Manager registration form</name>
		<description>This form allows FE users to register for events.</description>
		<form>
			<formid>tx_seminars_pi1_registration_editor</formid>
		</form>
		<debug>false</debug>
		<displaylabels>true</displaylabels>
	</meta>
	<control>
		<datahandler:RAW>
			<parentcallback>processRegistration</parentcallback>
		</datahandler:RAW>
		<renderer:STANDARD>
		</renderer:STANDARD>
		<actionlets>
			<actionlet:REDIRECT>
				<url>
					<userobj>
						<extension>this</extension>
						<method>getThankYouAfterRegistrationUrl</method>
					</userobj>
				</url>
			</actionlet:REDIRECT>
		</actionlets>
	</control>

	<elements>
		<renderlet:LABEL name="feuser_data">
			<data>
				<defaultvalue>
					<userobj>
						<extension>this</extension>
						<method>getFeUserData</method>
					</userobj>
				</defaultvalue>
			</data>
		</renderlet:LABEL>

		<renderlet:LABEL name="registration_data">
			<data>
				<defaultvalue>
					<userobj>
						<extension>this</extension>
						<method>getRegistrationData</method>
					</userobj>
				</defaultvalue>
			</data>
		</renderlet:LABEL>

		<renderlet:HIDDEN name="method_of_payment">
			<process>
				<userobj>
					<extension>this</extension>
					<method>showMethodsOfPayment</method>
				</userobj>
			</process>
		</renderlet:HIDDEN>

		<renderlet:HIDDEN name="billing_address">
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="billing_address" />
					</params>
				</userobj>
			</process>
		</renderlet:HIDDEN>

		<renderlet:HIDDEN name="seats">
			<validators>
				<validator:PREG>
					<pattern>
						<value>/^[\d]*$/</value>
						<message>LLL:EXT:seminars/pi1/locallang.php:message_noSeatsNumber</message>
					</pattern>
				</validator:PREG>
				<validator:STANDARD>
					<userobj>
						<extension>this</extension>
						<method>canRegisterSeats</method>
						<message>LLL:EXT:seminars/pi1/locallang.php:message_invalidNumberOfSeats</message>
					</userobj>
				</validator:STANDARD>
			</validators>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="seats" />
					</params>
				</userobj>
			</process>
		</renderlet:HIDDEN>

		<renderlet:HIDDEN name="attendees_names">
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="attendees_names" />
					</params>
				</userobj>
			</process>
		</renderlet:HIDDEN>

		<renderlet:HIDDEN name="interests">
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="interests" />
					</params>
				</userobj>
			</process>
		</renderlet:HIDDEN>

		<renderlet:HIDDEN name="expectations">
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="expectations" />
					</params>
				</userobj>
			</process>
		</renderlet:HIDDEN>

		<renderlet:HIDDEN name="background_knowledge">
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="background_knowledge" />
					</params>
				</userobj>
			</process>
		</renderlet:HIDDEN>

		<renderlet:HIDDEN name="accommodation">
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="accommodation" />
					</params>
				</userobj>
			</process>
		</renderlet:HIDDEN>

		<renderlet:HIDDEN name="food">
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="food" />
					</params>
				</userobj>
			</process>
		</renderlet:HIDDEN>

		<renderlet:HIDDEN name="known_from">
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="known_from" />
					</params>
				</userobj>
			</process>
		</renderlet:HIDDEN>

		<renderlet:HIDDEN name="notes">
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="notes" />
					</params>
				</userobj>
			</process>
		</renderlet:HIDDEN>

		<renderlet:CHECKSINGLE name="terms">
			<label>LLL:EXT:seminars/pi1/locallang.php:label_terms</label>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="terms" />
					</params>
				</userobj>
			</process>
			<validators>
				<validator:STANDARD>
					<userobj>
						<extension>this</extension>
						<method>isChecked</method>
						<message>LLL:EXT:seminars/pi1/locallang.php:message_acceptTerms</message>
					</userobj>
				</validator:STANDARD>
			</validators>
		</renderlet:CHECKSINGLE>
		<renderlet:SUBMIT name="btncont">
			<refresh />
			<label>LLL:EXT:seminars/pi1/locallang.php:label_back_registration</label>
		</renderlet:SUBMIT>
	</elements>

	<validation>
		<renderlet:SUBMIT name="btnsubmit">
			<label>LLL:EXT:seminars/pi1/locallang.php:label_submit_registration</label>
		</renderlet:SUBMIT>
	</validation>
</formidable>