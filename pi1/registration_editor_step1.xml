<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<formidable version="0.7.0">
	<meta>
		<name>Seminar Manager registration form</name>
		<description>This form allows FE users to register for events.</description>
		<form>
			<formid>tx_seminars_pi1_registration_editor</formid>
		</form>
		<debug>false</debug>
		<displaylabels>false</displaylabels>
	</meta>
	<control>
		<datahandler:RAW>
			<parentcallback>setPage</parentcallback>
		</datahandler:RAW>
		<renderer:TEMPLATE>
			<template>
				<path>
					<userobj>
						<extension>this</extension>
						<method>getTemplatePath</method>
					</userobj>
				</path>
				<subpart>###REGISTRATION_EDITOR_STEP_1###</subpart>
				<errortag>errors</errortag>
			</template>
		</renderer:TEMPLATE>
	</control>

	<elements>
		<renderlet:LABEL name="step_counter">
			<data>
				<value>
					<userobj>
						<extension>this</extension>
						<method>getStepCounter</method>
					</userobj>
				</value>
			</data>
		</renderlet:LABEL>

		<renderlet:LABEL name="feuser_data">
			<data>
				<value>
					<userobj>
						<extension>this</extension>
						<method>getAllFeUserData</method>
					</userobj>
				</value>
			</data>
		</renderlet:LABEL>

		<renderlet:LISTBOX name="price">
			<data>
				<userobj>
					<extension>this</extension>
					<method>populatePrices</method>
				</userobj>
			</data>
			<validators>
				<validator:STANDARD>
					<userobj>
						<extension>this</extension>
						<method>isValidPriceSelected</method>
						<message>LLL:EXT:seminars/pi1/locallang.xml:message_choosePrice</message>
					</userobj>
				</validator:STANDARD>
			</validators>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="price" />
					</params>
				</userobj>
			</process>
		</renderlet:LISTBOX>

		<renderlet:RADIOBUTTON name="method_of_payment">
			<data>
				<userobj>
					<extension>this</extension>
					<method>populateListPaymentMethods</method>
				</userobj>
				<defaultvalue>
					<userobj>
						<extension>this</extension>
						<method>getPreselectedPaymentMethod</method>
					</userobj>
				</defaultvalue>
			</data>
			<validators>
				<validator:STANDARD>
					<userobj>
						<extension>this</extension>
						<method>isMethodOfPaymentSelected</method>
						<message>LLL:EXT:seminars/pi1/locallang.xml:message_chooseMethodOfPayment</message>
					</userobj>
				</validator:STANDARD>
			</validators>
			<process>
				<userobj>
					<extension>this</extension>
					<method>showMethodsOfPayment</method>
				</userobj>
			</process>
		</renderlet:RADIOBUTTON>

		<renderlet:TEXT name="account_number">
			<data>
				<defaultvalue>
					<userobj>
						<extension>this</extension>
						<method>retrieveDataFromSession</method>
						<params>
							<data name="key" value="account_number" />
						</params>
					</userobj>
				</defaultvalue>
			</data>
			<validators>
				<validator:STANDARD>
					<userobj>
						<extension>this</extension>
						<method>hasBankData</method>
						<message>LLL:EXT:seminars/pi1/locallang.xml:message_provideBankData</message>
					</userobj>
				</validator:STANDARD>
			</validators>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasBankDataFormField</method>
					<params>
						<data name="elementname" value="account_number" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXT>
		<renderlet:TEXT name="bank_code">
			<data>
				<defaultvalue>
					<userobj>
						<extension>this</extension>
						<method>retrieveDataFromSession</method>
						<params>
							<data name="key" value="bank_code" />
						</params>
					</userobj>
				</defaultvalue>
			</data>
			<validators>
				<validator:STANDARD>
					<userobj>
						<extension>this</extension>
						<method>hasBankData</method>
						<message>LLL:EXT:seminars/pi1/locallang.xml:message_provideBankData</message>
					</userobj>
				</validator:STANDARD>
			</validators>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasBankDataFormField</method>
					<params>
						<data name="elementname" value="bank_code" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXT>
		<renderlet:TEXT name="bank_name">
			<data>
				<defaultvalue>
					<userobj>
						<extension>this</extension>
						<method>retrieveDataFromSession</method>
						<params>
							<data name="key" value="bank_name" />
						</params>
					</userobj>
				</defaultvalue>
			</data>
			<validators>
				<validator:STANDARD>
					<userobj>
						<extension>this</extension>
						<method>hasBankData</method>
						<message>LLL:EXT:seminars/pi1/locallang.xml:message_provideBankData</message>
					</userobj>
				</validator:STANDARD>
			</validators>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasBankDataFormField</method>
					<params>
						<data name="elementname" value="bank_name" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXT>
		<renderlet:TEXT name="account_owner">
			<data>
				<defaultvalue>
					<userobj>
						<extension>this</extension>
						<method>prefillAccountOwner</method>
					</userobj>
				</defaultvalue>
			</data>
			<validators>
				<validator:STANDARD>
					<userobj>
						<extension>this</extension>
						<method>hasBankData</method>
						<message>LLL:EXT:seminars/pi1/locallang.xml:message_provideBankData</message>
					</userobj>
				</validator:STANDARD>
			</validators>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasBankDataFormField</method>
					<params>
						<data name="elementname" value="account_owner" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXT>

		<renderlet:LISTBOX name="gender">
			<data>
				<items>
					<item caption="LLL:EXT:seminars/locallang_db.xml:tx_seminars_attendances.gender.I.0" value ="0" />
					<item caption="LLL:EXT:seminars/locallang_db.xml:tx_seminars_attendances.gender.I.1" value ="1" />
				</items>
				<defaultvalue>
					<userobj>
						<extension>this</extension>
						<method>getFeUserData</method>
						<params>
							<data name="key" value="gender" />
						</params>
					</userobj>
				</defaultvalue>
			</data>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="gender" />
					</params>
				</userobj>
			</process>
		</renderlet:LISTBOX>
		<renderlet:TEXT name="name">
			<data>
				<defaultvalue>
					<userobj>
						<extension>this</extension>
						<method>getFeUserData</method>
						<params>
							<data name="key" value="name" />
						</params>
					</userobj>
				</defaultvalue>
			</data>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="name" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXT>
		<renderlet:TEXTAREA name="address">
			<data>
				<defaultvalue>
					<userobj>
						<extension>this</extension>
						<method>getFeUserData</method>
						<params>
							<data name="key" value="address" />
						</params>
					</userobj>
				</defaultvalue>
			</data>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="address" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXTAREA>
		<renderlet:TEXT name="zip">
			<data>
				<defaultvalue>
					<userobj>
						<extension>this</extension>
						<method>getFeUserData</method>
						<params>
							<data name="key" value="zip" />
						</params>
					</userobj>
				</defaultvalue>
			</data>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="zip" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXT>
		<renderlet:TEXT name="city">
			<data>
				<defaultvalue>
					<userobj>
						<extension>this</extension>
						<method>getFeUserData</method>
						<params>
							<data name="key" value="city" />
						</params>
					</userobj>
				</defaultvalue>
			</data>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="city" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXT>
		<renderlet:LISTBOX name="country">
			<data>
				<userobj>
					<extension>this</extension>
					<method>populateListCountries</method>
				</userobj>
				<defaultvalue>
					<userobj>
						<extension>this</extension>
						<method>getFeUserData</method>
						<params>
							<data name="key" value="country" />
						</params>
					</userobj>
				</defaultvalue>
			</data>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="country" />
					</params>
				</userobj>
			</process>
		</renderlet:LISTBOX>
		<renderlet:TEXT name="telephone">
			<data>
				<defaultvalue>
					<userobj>
						<extension>this</extension>
						<method>getFeUserData</method>
						<params>
							<data name="key" value="telephone" />
						</params>
					</userobj>
				</defaultvalue>
			</data>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="telephone" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXT>
		<renderlet:TEXT name="email">
			<data>
				<defaultvalue>
					<userobj>
						<extension>this</extension>
						<method>getFeUserData</method>
						<params>
							<data name="key" value="email" />
						</params>
					</userobj>
				</defaultvalue>
			</data>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="email" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXT>

		<renderlet:LISTBOX name="seats">
			<data>
				<items>
					<item value="1" caption="1" />
					<item value="2" caption="2" />
					<item value="3" caption="3" />
					<item value="4" caption="4" />
					<item value="5" caption="5" />
					<item value="6" caption="6" />
					<item value="7" caption="7" />
					<item value="8" caption="8" />
					<item value="9" caption="9" />
					<item value="10" caption="10" />
					<item value="11" caption="11" />
					<item value="12" caption="12" />
					<item value="13" caption="13" />
					<item value="14" caption="14" />
					<item value="15" caption="15" />
					<item value="16" caption="16" />
					<item value="17" caption="17" />
					<item value="18" caption="18" />
					<item value="19" caption="19" />
					<item value="20" caption="20" />
				</items>
				<defaultvalue>1</defaultvalue>
			</data>
			<validators>
				<validator:PREG>
					<pattern>
						<value>/^[\d]*$/</value>
						<message>LLL:EXT:seminars/pi1/locallang.xml:message_noSeatsNumber</message>
					</pattern>
				</validator:PREG>
				<validator:STANDARD>
					<userobj>
						<extension>this</extension>
						<method>canRegisterSeats</method>
						<message>LLL:EXT:seminars/pi1/locallang.xml:message_invalidNumberOfSeats</message>
					</userobj>
				</validator:STANDARD>
			</validators>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="seats" />
					</params>
				</userobj>
			</process>
		</renderlet:LISTBOX>

		<renderlet:TEXTAREA name="attendees_names">
			<validators>
				<validator:STANDARD>
					<userobj>
						<extension>this</extension>
						<method>hasAttendeesNames</method>
						<message>LLL:EXT:seminars/pi1/locallang.xml:message_provideAttendeesNames</message>
					</userobj>
				</validator:STANDARD>
			</validators>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="attendees_names" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXTAREA>

		<renderlet:LISTBOX name="kids">
			<data>
				<items>
					<item caption="&amp;nbsp;">0</item>
					<item value="1" caption="1" />
					<item value="2" caption="2" />
					<item value="3" caption="3" />
					<item value="4" caption="4" />
					<item value="5" caption="5" />
				</items>
			</data>
			<validators>
				<validator:PREG>
					<pattern>
						<value>/^[\d]*$/</value>
						<message>LLL:EXT:seminars/pi1/locallang.xml:message_noKidsNumber</message>
					</pattern>
				</validator:PREG>
			</validators>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="kids" />
					</params>
				</userobj>
			</process>
		</renderlet:LISTBOX>

		<renderlet:CHECKBOX name="lodgings">
			<data>
				<userobj>
					<extension>this</extension>
					<method>populateLodgings</method>
				</userobj>
			</data>
			<validators>
				<validator:STANDARD>
					<userobj>
						<extension>this</extension>
						<method>isLodgingSelected</method>
						<message>LLL:EXT:seminars/pi1/locallang.xml:message_selectLodging</message>
					</userobj>
				</validator:STANDARD>
			</validators>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasLodgings</method>
				</userobj>
			</process>
		</renderlet:CHECKBOX>
		<renderlet:TEXTAREA name="accommodation">
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="accommodation" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXTAREA>

		<renderlet:CHECKBOX name="foods">
			<data>
				<userobj>
					<extension>this</extension>
					<method>populateFoods</method>
				</userobj>
			</data>
			<validators>
				<validator:STANDARD>
					<userobj>
						<extension>this</extension>
						<method>isFoodSelected</method>
						<message>LLL:EXT:seminars/pi1/locallang.xml:message_selectFood</message>
					</userobj>
				</validator:STANDARD>
			</validators>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasFoods</method>
				</userobj>
			</process>
		</renderlet:CHECKBOX>
		<renderlet:TEXTAREA name="food">
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="food" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXTAREA>

		<renderlet:CHECKBOX name="checkboxes">
			<data>
				<userobj>
					<extension>this</extension>
					<method>populateCheckboxes</method>
				</userobj>
			</data>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasCheckboxes</method>
				</userobj>
			</process>
		</renderlet:CHECKBOX>

		<renderlet:TEXTAREA name="interests">
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="interests" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXTAREA>

		<renderlet:TEXTAREA name="expectations">
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="expectations" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXTAREA>

		<renderlet:TEXTAREA name="background_knowledge">
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="background_knowledge" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXTAREA>

		<renderlet:TEXTAREA name="known_from">
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="known_from" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXTAREA>

		<renderlet:TEXTAREA name="notes">
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="notes" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXTAREA>

		<renderlet:SUBMIT name="button_continue">
			<label>###LABEL_PROCEED_REGISTRATION###</label>
		</renderlet:SUBMIT>
		<renderlet:SUBMIT name="button_submit">
			<label>###LABEL_SUBMIT_REGISTRATION###</label>
			<onclick runat="server" submit="full">
				<userobj>
					<php><![CDATA[
						$this->_oParent->currentPageNumber = 2;
					]]></php>
				</userobj>
			</onclick>
		</renderlet:SUBMIT>

		<renderlet:PASSTHRU name="next_page">
			<data>
				<value>1</value>
			</data>
		</renderlet:PASSTHRU>
	</elements>
</formidable>