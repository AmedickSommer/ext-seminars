<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<formidable version="0.5.0">
	<meta>
		<name>Seminar Manager registration form</name>
		<description>This form allows FE users to register for events.</description>
		<form>
			<formid>tx_seminars_pi1_registration_editor</formid>
		</form>
		<debug>false</debug>
		<displaylabels>false</displaylabels>
	</meta>
	<control>
		<datahandler:RAW>
			<parentcallback>showConfirmationPage</parentcallback>
		</datahandler:RAW>
		<renderer:TEMPLATE>
			<template>
				<path>EXT:seminars/pi1/registration_editor.html</path>
				<subpart>###REGISTRATION_EDITOR_STEP_1###</subpart>
				<errortag>errors</errortag>
			</template>
		</renderer:TEMPLATE>
	</control>

	<elements>
		<renderlet:LISTBOX name="price">
			<data>
				<userobj>
					<extension>this</extension>
					<method>populatePrices</method>
				</userobj>
			</data>
			<validators>
				<validator:STANDARD>
					<userobj>
						<extension>this</extension>
						<method>isValidPriceSelected</method>
						<message>LLL:EXT:seminars/pi1/locallang.php:message_choosePrice</message>
					</userobj>
				</validator:STANDARD>
			</validators>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="price" />
					</params>
				</userobj>
			</process>
		</renderlet:LISTBOX>

		<renderlet:RADIOBUTTON name="method_of_payment">
			<data>
				<userobj>
					<extension>this</extension>
					<method>populateListPaymentMethods</method>
				</userobj>
				<defaultvalue>
					<userobj>
						<extension>this</extension>
						<method>getPreselectedPaymentMethod</method>
					</userobj>
				</defaultvalue>
			</data>
			<validators>
				<validator:STANDARD>
					<userobj>
						<extension>this</extension>
						<method>isMethodOfPaymentSelected</method>
						<message>LLL:EXT:seminars/pi1/locallang.php:message_chooseMethodOfPayment</message>
					</userobj>
				</validator:STANDARD>
			</validators>
			<process>
				<userobj>
					<extension>this</extension>
					<method>showMethodsOfPayment</method>
				</userobj>
			</process>
		</renderlet:RADIOBUTTON>

		<renderlet:TEXT name="account_number">
			<data>
				<defaultvalue>
					<userobj>
						<extension>this</extension>
						<method>retrieveDataFromSession</method>
						<params>
							<data name="key" value="account_number" />
						</params>
					</userobj>
				</defaultvalue>
			</data>
			<validators>
				<validator:STANDARD>
					<userobj>
						<extension>this</extension>
						<method>hasBankData</method>
						<message>LLL:EXT:seminars/pi1/locallang.php:message_provideBankData</message>
					</userobj>
				</validator:STANDARD>
			</validators>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasBankDataFormField</method>
					<params>
						<data name="elementname" value="account_number" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXT>
		<renderlet:TEXT name="bank_code">
			<data>
				<defaultvalue>
					<userobj>
						<extension>this</extension>
						<method>retrieveDataFromSession</method>
						<params>
							<data name="key" value="bank_code" />
						</params>
					</userobj>
				</defaultvalue>
			</data>
			<validators>
				<validator:STANDARD>
					<userobj>
						<extension>this</extension>
						<method>hasBankData</method>
						<message>LLL:EXT:seminars/pi1/locallang.php:message_provideBankData</message>
					</userobj>
				</validator:STANDARD>
			</validators>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasBankDataFormField</method>
					<params>
						<data name="elementname" value="bank_code" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXT>
		<renderlet:TEXT name="bank_name">
			<data>
				<defaultvalue>
					<userobj>
						<extension>this</extension>
						<method>retrieveDataFromSession</method>
						<params>
							<data name="key" value="bank_name" />
						</params>
					</userobj>
				</defaultvalue>
			</data>
			<validators>
				<validator:STANDARD>
					<userobj>
						<extension>this</extension>
						<method>hasBankData</method>
						<message>LLL:EXT:seminars/pi1/locallang.php:message_provideBankData</message>
					</userobj>
				</validator:STANDARD>
			</validators>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasBankDataFormField</method>
					<params>
						<data name="elementname" value="bank_name" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXT>
		<renderlet:TEXT name="account_owner">
			<data>
				<defaultvalue>
					<userobj>
						<extension>this</extension>
						<method>prefillAccountOwner</method>
					</userobj>
				</defaultvalue>
			</data>
			<validators>
				<validator:STANDARD>
					<userobj>
						<extension>this</extension>
						<method>hasBankData</method>
						<message>LLL:EXT:seminars/pi1/locallang.php:message_provideBankData</message>
					</userobj>
				</validator:STANDARD>
			</validators>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasBankDataFormField</method>
					<params>
						<data name="elementname" value="account_owner" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXT>

		<renderlet:LISTBOX name="gender">
			<data>
				<items>
					<item caption="LLL:EXT:seminars/locallang_db.php:tx_seminars_attendances.gender.I.0" value ="0" />
					<item caption="LLL:EXT:seminars/locallang_db.php:tx_seminars_attendances.gender.I.1" value ="1" />
				</items>
				<defaultvalue>
					<userobj>
						<extension>this</extension>
						<method>getFeUserData</method>
						<params>
							<data name="key" value="gender" />
						</params>
					</userobj>
				</defaultvalue>
			</data>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="gender" />
					</params>
				</userobj>
			</process>
		</renderlet:LISTBOX>
		<renderlet:TEXT name="name">
			<data>
				<defaultvalue>
					<userobj>
						<extension>this</extension>
						<method>getFeUserData</method>
						<params>
							<data name="key" value="name" />
						</params>
					</userobj>
				</defaultvalue>
			</data>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="name" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXT>
		<renderlet:TEXTAREA name="address">
			<data>
				<defaultvalue>
					<userobj>
						<extension>this</extension>
						<method>getFeUserData</method>
						<params>
							<data name="key" value="address" />
						</params>
					</userobj>
				</defaultvalue>
			</data>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="address" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXTAREA>
		<renderlet:TEXT name="zip">
			<data>
				<defaultvalue>
					<userobj>
						<extension>this</extension>
						<method>getFeUserData</method>
						<params>
							<data name="key" value="zip" />
						</params>
					</userobj>
				</defaultvalue>
			</data>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="zip" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXT>
		<renderlet:TEXT name="city">
			<data>
				<defaultvalue>
					<userobj>
						<extension>this</extension>
						<method>getFeUserData</method>
						<params>
							<data name="key" value="city" />
						</params>
					</userobj>
				</defaultvalue>
			</data>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="city" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXT>
		<renderlet:LISTBOX name="country">
			<data>
				<userobj>
					<extension>this</extension>
					<method>populateListCountries</method>
				</userobj>
				<defaultvalue>
					<userobj>
						<extension>this</extension>
						<method>getFeUserData</method>
						<params>
							<data name="key" value="country" />
						</params>
					</userobj>
				</defaultvalue>
			</data>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="country" />
					</params>
				</userobj>
			</process>
		</renderlet:LISTBOX>
		<renderlet:TEXT name="telephone">
			<data>
				<defaultvalue>
					<userobj>
						<extension>this</extension>
						<method>getFeUserData</method>
						<params>
							<data name="key" value="telephone" />
						</params>
					</userobj>
				</defaultvalue>
			</data>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="telephone" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXT>
		<renderlet:TEXT name="email">
			<data>
				<defaultvalue>
					<userobj>
						<extension>this</extension>
						<method>getFeUserData</method>
						<params>
							<data name="key" value="email" />
						</params>
					</userobj>
				</defaultvalue>
			</data>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="email" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXT>

		<renderlet:TEXT name="seats">
			<data>
				<defaultvalue>1</defaultvalue>
			</data>
			<validators>
				<validator:PREG>
					<pattern>
						<value>/^[\d]*$/</value>
						<message>LLL:EXT:seminars/pi1/locallang.php:message_noSeatsNumber</message>
					</pattern>
				</validator:PREG>
				<validator:STANDARD>
					<userobj>
						<extension>this</extension>
						<method>canRegisterSeats</method>
						<message>LLL:EXT:seminars/pi1/locallang.php:message_invalidNumberOfSeats</message>
					</userobj>
				</validator:STANDARD>
			</validators>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="seats" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXT>

		<renderlet:TEXTAREA name="attendees_names">
			<validators>
				<validator:STANDARD>
					<userobj>
						<extension>this</extension>
						<method>hasAttendeesNames</method>
						<message>LLL:EXT:seminars/pi1/locallang.php:message_provideAttendeesNames</message>
					</userobj>
				</validator:STANDARD>
			</validators>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="attendees_names" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXTAREA>

		<renderlet:TEXT name="kids">
			<validators>
				<validator:PREG>
					<pattern>
						<value>/^[\d]*$/</value>
						<message>LLL:EXT:seminars/pi1/locallang.php:message_noKidsNumber</message>
					</pattern>
				</validator:PREG>
			</validators>
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="kids" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXT>

		<renderlet:TEXTAREA name="interests">
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="interests" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXTAREA>

		<renderlet:TEXTAREA name="expectations">
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="expectations" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXTAREA>

		<renderlet:TEXTAREA name="background_knowledge">
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="background_knowledge" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXTAREA>

		<renderlet:TEXTAREA name="accommodation">
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="accommodation" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXTAREA>

		<renderlet:TEXTAREA name="food">
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="food" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXTAREA>

		<renderlet:TEXTAREA name="known_from">
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="known_from" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXTAREA>

		<renderlet:TEXTAREA name="notes">
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="notes" />
					</params>
				</userobj>
			</process>
		</renderlet:TEXTAREA>

		<renderlet:SUBMIT name="button_continue">
			<label>LLL:EXT:seminars/pi1/locallang.php:label_proceed_registration</label>
		</renderlet:SUBMIT>

		<renderlet:HIDDEN name="terms_2">
			<process>
				<userobj>
					<extension>this</extension>
					<method>hasRegistrationFormField</method>
					<params>
						<data name="elementname" value="terms_2" />
					</params>
				</userobj>
			</process>
		</renderlet:HIDDEN>
	</elements>
</formidable>