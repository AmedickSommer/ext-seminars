<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<formidable version="0.7.0">
	<meta>
		<name>Seminar Manager FE Editor</name>
		<description>This editor provides a FE editing feature for events.</description>
		<form>
			<formid>tx_seminars_pi1_seminars</formid>
		</form>
		<debug>false</debug>
		<displaylabels>true</displaylabels>
	</meta>
	<control>
		<datahandler:DBMM>
			<tablename>tx_seminars_seminars</tablename>
			<keyname>uid</keyname>
			<labelname>title</labelname>
			<mmrelations>
				<relation field="place" mmtable="tx_seminars_seminars_place_mm" />
				<relation field="lodgings" mmtable="tx_seminars_seminars_lodgings_mm" />
				<relation field="foods" mmtable="tx_seminars_seminars_foods_mm" />
				<relation field="speakers" mmtable="tx_seminars_seminars_speakers_mm" />
				<relation field="partners" mmtable="tx_seminars_seminars_speakers_mm_partners" />
				<relation field="tutors" mmtable="tx_seminars_seminars_speakers_mm_tutors" />
				<relation field="leaders" mmtable="tx_seminars_seminars_speakers_mm_leaders" />
			</mmrelations>
			<process>
				<beforeinsertion>
					<userobj>
						<extension>this</extension>
						<method>unifyDecimalSeparators</method>
					</userobj>
				</beforeinsertion>
			</process>
		</datahandler:DBMM>
		<renderer:TEMPLATE>
			<template>
				<path>
					<userobj>
						<extension>this</extension>
						<method>getTemplatePath</method>
					</userobj>
				</path>
				<subpart>###seminars_FORM###</subpart>
				<errortag>errors</errortag>
			</template>
		</renderer:TEMPLATE>
		<actionlets>
			<actionlet:REDIRECT>
				<url>
					<userobj>
						<extension>this</extension>
						<method>getEventSuccessfullySavedUrl</method>
					</userobj>
				</url>
			</actionlet:REDIRECT>
		</actionlets>
	</control>
	<elements>
		<renderlet:TEXT name="title">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.title</label>
			<validators>
				<validator:STANDARD>
					<required>
						<message>LLL:EXT:seminars/pi1/locallang.xml:message_emptyTitle</message>
					</required>
				</validator:STANDARD>
			</validators>
		</renderlet:TEXT>

		<renderlet:TEXT name="subtitle">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.subtitle</label>
		</renderlet:TEXT>

		<renderlet:TEXTAREA name="teaser">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.teaser</label>
		</renderlet:TEXTAREA>

		<renderlet:TEXTAREA name="description">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.description</label>
		</renderlet:TEXTAREA>

		<renderlet:LISTBOX name="event_type">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.event_type</label>
			<data>
				<items>
					<item>
						<caption>&amp;nbsp;</caption>
						<value>0</value>
					</item>
				</items>
				<userobj>
					<extension>this</extension>
					<method>populateListEventTypes</method>
				</userobj>
			</data>
		</renderlet:LISTBOX>

		<renderlet:TEXT name="accreditation_number">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.accreditation_number</label>
		</renderlet:TEXT>

		<renderlet:TEXT name="credit_points">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.credit_points</label>
		</renderlet:TEXT>

		<renderlet:DATE name="begin_date">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.begin_date</label>
			<data>
				<datetime format="%H:%M %d-%m-%Y" displaytime="true"
					converttotimestamp="true" />
			</data>
		</renderlet:DATE>

		<renderlet:DATE name="end_date">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.end_date</label>
			<data>
				<datetime format="%H:%M %d-%m-%Y" displaytime="true"
					converttotimestamp="true" />
			</data>
		</renderlet:DATE>

		<renderlet:DATE name="deadline_registration">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.deadline_registration</label>
			<data>
				<datetime format="%H:%M %d-%m-%Y" displaytime="true"
					converttotimestamp="true" />
			</data>
		</renderlet:DATE>

		<renderlet:DATE name="deadline_early_bird">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.deadline_early_bird</label>
			<data>
				<datetime format="%H:%M %d-%m-%Y" displaytime="true"
					converttotimestamp="true" />
			</data>
		</renderlet:DATE>

		<renderlet:CHECKBOX name="place">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.place</label>
			<data>
				<userobj>
					<extension>this</extension>
					<method>populateListPlaces</method>
				</userobj>
			</data>
		</renderlet:CHECKBOX>

		<renderlet:TEXT name="room">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.room</label>
		</renderlet:TEXT>

		<renderlet:TEXTAREA name="additional_times_places">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.additional_times_places</label>
		</renderlet:TEXTAREA>

		<renderlet:CHECKBOX name="lodgings">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.lodgings</label>
			<data>
				<userobj>
					<extension>this</extension>
					<method>populateListLodgings</method>
				</userobj>
			</data>
		</renderlet:CHECKBOX>

		<renderlet:CHECKBOX name="foods">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.foods</label>
			<data>
				<userobj>
					<extension>this</extension>
					<method>populateListFoods</method>
				</userobj>
			</data>
		</renderlet:CHECKBOX>

		<renderlet:CHECKBOX name="speakers">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.speakers</label>
			<data>
				<userobj>
					<extension>this</extension>
					<method>populateListSpeakers</method>
				</userobj>
			</data>
		</renderlet:CHECKBOX>

		<renderlet:CHECKBOX name="partners">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.partners</label>
			<data>
				<userobj>
					<extension>this</extension>
					<method>populateListSpeakers</method>
				</userobj>
			</data>
		</renderlet:CHECKBOX>

		<renderlet:CHECKBOX name="tutors">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.tutors</label>
			<data>
				<userobj>
					<extension>this</extension>
					<method>populateListSpeakers</method>
				</userobj>
			</data>
		</renderlet:CHECKBOX>

		<renderlet:CHECKBOX name="leaders">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.leaders</label>
			<data>
				<userobj>
					<extension>this</extension>
					<method>populateListSpeakers</method>
				</userobj>
			</data>
		</renderlet:CHECKBOX>

		<renderlet:TEXT name="price_regular">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.price_regular</label>
			<validators>
				<validator:PREG>
					<pattern>
						<value>/^[\d]*((\.|,)[\d]{1,2})?$/</value>
						<message>LLL:EXT:seminars/pi1/locallang.xml:message_noPriceNumber</message>
					</pattern>
				</validator:PREG>
			</validators>
		</renderlet:TEXT>

		<renderlet:TEXT name="price_regular_early">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.price_regular_early</label>
			<validators>
				<validator:PREG>
					<pattern>
						<value>/^[\d]*((\.|,)[\d]{1,2})?$/</value>
						<message>LLL:EXT:seminars/pi1/locallang.xml:message_noPriceNumber</message>
					</pattern>
				</validator:PREG>
			</validators>
		</renderlet:TEXT>

		<renderlet:TEXT name="price_regular_board">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.price_regular_board</label>
			<validators>
				<validator:PREG>
					<pattern>
						<value>/^[\d]*((\.|,)[\d]{1,2})?$/</value>
						<message>LLL:EXT:seminars/pi1/locallang.xml:message_noPriceNumber</message>
					</pattern>
				</validator:PREG>
			</validators>
		</renderlet:TEXT>

		<renderlet:TEXT name="price_special">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.price_special</label>
			<validators>
				<validator:PREG>
					<pattern>
						<value>/^[\d]*((\.|,)[\d]{1,2})?$/</value>
						<message>LLL:EXT:seminars/pi1/locallang.xml:message_noPriceNumber</message>
					</pattern>
				</validator:PREG>
			</validators>
		</renderlet:TEXT>

		<renderlet:TEXT name="price_special_early">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.price_special_early</label>
			<validators>
				<validator:PREG>
					<pattern>
						<value>/^[\d]*((\.|,)[\d]{1,2})?$/</value>
						<message>LLL:EXT:seminars/pi1/locallang.xml:message_noPriceNumber</message>
					</pattern>
				</validator:PREG>
			</validators>
		</renderlet:TEXT>

		<renderlet:TEXT name="price_special_board">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.price_special_board</label>
			<validators>
				<validator:PREG>
					<pattern>
						<value>/^[\d]*((\.|,)[\d]{1,2})?$/</value>
						<message>LLL:EXT:seminars/pi1/locallang.xml:message_noPriceNumber</message>
					</pattern>
				</validator:PREG>
			</validators>
		</renderlet:TEXT>

		<renderlet:TEXTAREA name="additional_information">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.additional_information</label>
		</renderlet:TEXTAREA>

		<renderlet:CHECKBOX name="checkboxes">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.checkboxes</label>
			<data>
				<userobj>
					<extension>this</extension>
					<method>populateListCheckboxes</method>
				</userobj>
			</data>
		</renderlet:CHECKBOX>

		<renderlet:CHECKBOX name="payment_methods">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.payment_methods</label>
			<data>
				<userobj>
					<extension>this</extension>
					<method>populateListPaymentMethods</method>
				</userobj>
			</data>
		</renderlet:CHECKBOX>

		<renderlet:CHECKBOX name="organizers">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.organizers</label>
			<data>
				<userobj>
					<extension>this</extension>
					<method>populateListOrganizers</method>
				</userobj>
			</data>
			<validators>
				<validator:STANDARD>
					<userobj>
						<message>LLL:EXT:seminars/pi1/locallang.xml:message_emptyOrganizer</message>
						<php><![CDATA[
							$value = array_pop(func_get_args());
							return (!empty($value));
						]]></php>
					</userobj>
				</validator:STANDARD>
			</validators>
		</renderlet:CHECKBOX>

		<renderlet:CHECKSINGLE name="needs_registration">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.needs_registration</label>
		</renderlet:CHECKSINGLE>

		<renderlet:CHECKSINGLE name="allows_multiple_registrations">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.allows_multiple_registrations</label>
		</renderlet:CHECKSINGLE>

		<renderlet:TEXT name="attendees_min">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.attendees_min</label>
			<validators>
				<validator:PREG>
					<pattern>
						<value>/^[\d]*$/</value>
						<message>LLL:EXT:seminars/pi1/locallang.xml:message_noAttendeesNumber</message>
					</pattern>
				</validator:PREG>
			</validators>
		</renderlet:TEXT>

		<renderlet:TEXT name="attendees_max">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.attendees_max</label>
			<validators>
				<validator:PREG>
					<pattern>
						<value>/^[\d]*$/</value>
						<message>LLL:EXT:seminars/pi1/locallang.xml:message_noAttendeesNumber</message>
					</pattern>
				</validator:PREG>
			</validators>
		</renderlet:TEXT>

		<renderlet:CHECKSINGLE name="cancelled">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.cancelled</label>
		</renderlet:CHECKSINGLE>

		<renderlet:CHECKSINGLE name="uses_terms_2">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.uses_terms_2</label>
		</renderlet:CHECKSINGLE>

		<renderlet:TEXTAREA name="notes">
			<label>LLL:EXT:seminars/locallang_db.xml:tx_seminars_seminars.notes</label>
		</renderlet:TEXTAREA>

		<renderlet:SUBMIT name="btnsubmit">
			<label>LLL:EXT:seminars/pi1/locallang.xml:label_save</label>
		</renderlet:SUBMIT>

		<renderlet:PASSTHRU name="owner_feuser">
			<data>
				<value>CURRENT_USERID</value>
			</data>
		</renderlet:PASSTHRU>

		<renderlet:PASSTHRU name="crdate">
			<data>
				<value>CURRENT_TIMESTAMP</value>
			</data>
		</renderlet:PASSTHRU>

		<renderlet:PASSTHRU name="tstamp">
			<data>
				<value>CURRENT_TIMESTAMP</value>
			</data>
		</renderlet:PASSTHRU>

		<renderlet:PASSTHRU name="pid">
			<data>
				<value>
					<userobj>
						<extension>this</extension>
						<method>getPidForNewEvents</method>
					</userobj>
				</value>
			</data>
		</renderlet:PASSTHRU>
	</elements>
</formidable>